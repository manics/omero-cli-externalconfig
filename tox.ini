[tox]
envlist = py36, py37, py38
# https://tox.readthedocs.io/en/latest/config.html#conf-requires
# Ensure pip is new enough
requires = pip >= 20.0.0
           virtualenv >= 20.0.0

[testenv]
# For environment markers see
# https://www.python.org/dev/peps/pep-0508/#environment-markers
deps =
    jinja2
    omero-py
    https://github.com/ome/zeroc-ice-py-travis-bionic/releases/download/0.0.1/zeroc_ice-3.6.5-cp36-cp36m-linux_x86_64.whl; platform_system=="Linux" and python_version=="3.6"
    https://github.com/ome/zeroc-ice-py-travis-bionic/releases/download/0.0.1/zeroc_ice-3.6.5-cp37-cp37m-linux_x86_64.whl; platform_system=="Linux" and python_version=="3.7"
    https://github.com/ome/zeroc-ice-py-travis-bionic/releases/download/0.0.1/zeroc_ice-3.6.5-cp38-cp38-linux_x86_64.whl; platform_system=="Linux" and python_version=="3.8"
passenv =
    PIP_CACHE_DIR
commands =
    python setup.py install
    pytest {posargs:-rf -s}
